window.cAPI=function(s){function t(a,c){var b={key:a,timeStamp:c},d=u,d={g:d.key,h:b.key,d:b.timeStamp-d.timeStamp};u=b;""!=d.key&&1E3>d.d&&("train"==s()?v(d,f.a):v(d,f.data))}function w(){for(var a in f.b)f.b[a].val("");f.b[0]&&f.b[0].focus()}function x(a){return'<span class="'+(0.15>a?"result-cad p-low":0.2>a?"result-cad p-medium":"result-cad p-urgent")+'">'+(0.15>a?"Permitido":0.2>a?"Dudoso":"Denegado")+"</span>"}function v(a,c){var b=a.g+"_"+a.h;void 0!=c[b]?c[b].push(a.d):c[b]=[a.d]}function y(a,
c){var b=0,d=0,n;for(n in a){var p=a[n],l=c[n];if(l){var e=q.e(l),l=q.f(l)+1,l=new z(e*e/l,l/e),e=l.c(e),g;for(g in p){var h=l.c(p[g])-e,b=b+h*h;d++}}}return!d?void 0:b/d}function z(a,c){function b(a){var c=1+76.18009173/a-86.50532033/(a+1)+24.01409822/(a+2)-1.231739516/(a+3)+0.00120858003/(a+4)-5.36382E-6/(a+5);return(a-0.5)*d(a+4.5)-(a+4.5)+d(2.50662827465*c)}var d=Math.log,n=Math.exp,p=Math.abs,l=Math.sqrt;this.c=function(e){var g=e/c;e=a/1;var h,m,k;if(0>=g)e=0;else if(200<e)g=(g-e)/l(e),h=1/
(1+0.2316419*p(g)),h=0.3989423*n(-g*g/2)*h*(0.3193815+h*(-0.3565638+h*(1.781478+h*(-1.821256+1.330274*h)))),0<g&&(h=1-h),m=2/l(e),k=0.39894228*n(-g*g/2),e=3*(6/e)*(g*g-3)+m*m*(g^4-10*g*g+15),e=h-m*(g*g-1)*k/6-k*g*e/72;else if(g<e+1){m=h=1/e;for(k=1;h>1E-5*m;)h=h*g/(e+k),m+=h,k+=1;e=m*=n(e*d(g)-g-b(e))}else{h=0;k=m=1;for(var f=g,q=0,r=0;1E-5<p((k-q)/k);)q=k,r+=1,h=k+(r-e)*h,m=f+(r-e)*m,k=g*h+r*k,f=g*m+r*f,h/=f,m/=f,k/=f,f=1;e=1-n(e*d(g)-g-b(e))*k}return e}}var q={total:function(a){var c=0,b,d=a.length;
for(b=0;b<d;b++)c+=a[b];return c},i:function(a){var c=0,b,d=a.length;for(b=0;b<d;b++)c+=a[b]*a[b];return c},e:function(a){return this.total(a)/a.length},f:function(a){var c=this.e(a),b=0,d,n=a.length,f;for(d=0;d<n;d++)f=a[d]-c,b+=f*f;return b/n}},f=this,u={key:"",timeStamp:0};this.b=[];this.data={};this.a={};this.profiles={};this.listen=function(a){a=$("#"+a);this.b.push(a);a.keydown(function(a){t(a.keyCode+"d",a.timeStamp)});a.keyup(function(a){t(a.keyCode+"u",a.timeStamp)})};this.save=function(a){this.profiles[a]=
this.a;this.a={}};this.load=function(a){this.a=this.profiles[a];void 0==this.a&&(this.a={})};this.run=function(a){if("train"==s())a("Training... click <span class='label label-info'>run</span> to test");else if(this.a){var c=y(f.data,f.a);a(void 0==c?"Not enough training":"Result: "+x(c));this.data={}}else a("Please train first");w()};this.match=function(a){if("train"==s())a("Training... click <span class='label label-info'>run</span> to test");else{var c=null,b=200,d;for(d in this.profiles){var f=
y(this.data,this.profiles[d]);void 0!=f&&f<b&&(c=d,b=f)}c?a("And the winner is "+c+" with a rate of "+x(b)+"."):a("Please do a little bit more training!");this.data={}}w()};this.drawtrain=function(a){a=$("#"+a);var c='<table class="table table-striped"><tr><th>k1_k2</th><th>deltas</th><th>n</th><th>&mu;</th><th>&sigma;<sup>2</sup></th><th>expected val</th></tr>',b=!0,d;for(d in this.a)var f=this.a[d],p=q.e(f),l=q.f(f)+1,e=(new z(p*p/l,l/p)).c(p),b=!1,c=c+("<tr><td>"+d+"</td><td>"+f.join(", ")+"</td><td>"+
f.length+"</td><td>"+p+"</td><td>"+l+"</td><td>"+e+"</td></tr>");c+="</tr></table>";b&&(c="<p>Please train it first</p>");a.html(c+"<p>"+this.getTrain().join(", ")+"</p>")};this.getTrain=function(){var a=[],c;for(c in f.a){var b=f.a[c];b&&(a.push(c),a.push(q.total(b)),a.push(q.i(b)),a.push(b.length))}return a}};
